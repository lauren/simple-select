/*
 * Copyright 2013 Lauren Sperber
 * https://github.com/lauren/simple-select/blob/master/LICENSE
 */(function(e){var t=function(e){var e=n(e),t=document.getElementsByTagName("*");return s(t,f,e)},n=function(e){e=e.split(" ");for(var t=0;t<e.length;t++)switch(e[t].charAt(0)){case"#":e[t]={id:e[t]};break;case".":e[t]={classes:[e[t]]};break;default:e[t]={node:e[t]}}for(var t=0;t<e.length;t++)e[t].classes&&(e[t].classes=i(e[t].classes[0])),e[t].node&&(/#/.test(e[t].node)&&(e[t]=r(e[t].node)),/\./.test(e[t].node)&&(e[t].classes=i(e[t].node),e[t].node=e[t].node.split(".")[0])),e[t].id&&/\./.test(e[t].id)&&(e[t].classes=i(e[t].id),e[t].id=e[t].id.split(".")[0]);return e},r=function(e){var t=e.split("#");return{node:t[0],id:"#"+t[1]}},i=function(e){var t=e.split(".");t.shift();for(var n=0;n<t.length;n++)t[n]="."+t[n];return t},s=function(e,t,n){var r=[];for(var i=0;i<e.length;i++)t(e[i],o(e[i]),n)&&r.push(e[i]);return r},o=function(e){var t=[];while(e.parentNode)t.unshift(e.parentNode),e=e.parentNode;return t},u=function(e,t){var n=e.nodeName.toLowerCase(),r=e.className.split(" "),i="#"+e.id,s;for(var o=0;o<r.length;o++)r[o]="."+r[o];return t.node&&(s=t.node===n),t.id&&(s=t.id===i),t.classes&&(s=c(t.classes,r)),s},a=function(e,t){var n=e.slice(0).pop(),r;return result={match:!1,matchingElement:!1},e.length<=1?(result.match=!1,result):u(n,t)?(result.match=!0,result.matchingElement=n,result):(a(e.slice(0,e.length-1),t),result)},f=function(e,t,n){var r=n.length,i=n[r-1],s=n[r-2],l,c;return r===0?!1:r===1?u(e,n[0]):u(e,i)&&t.length>1?(l=a(t,s),l.match?(c=o(l.matchingElement),n.length===2?!0:f(l.matchingElement,c,n.slice(0,n.length-1))):!1):!1},l=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},c=function(e,t){return e.length===0?!0:l(t,e[0])>-1&&c(e.slice(1),t)};e.simpleSelect=t})(this);